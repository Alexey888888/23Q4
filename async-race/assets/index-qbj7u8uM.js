var S=Object.defineProperty;var P=(o,e,t)=>e in o?S(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var n=(o,e,t)=>(P(o,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();class i{constructor({tag:e="div",classNames:t=[],text:a="",attribute:s,value:r}={},...d){n(this,"children",[]);n(this,"node");const h=document.createElement(e);h.textContent=a,this.node=h,t.length>0&&this.addClass(t),d&&this.appendChildren(d),s&&r&&this.setAttribute(s,r)}append(e){this.children.push(e),this.node.append(e.getNode())}getNode(){return this.node}appendChildren(e){e.forEach(t=>{this.append(t)})}addClass(e){this.node.classList.add(...e)}removeClass(e){this.node.classList.remove(e)}toggleClass(e){this.node.classList.toggle(e)}setTextContent(e){this.node.textContent=e}setAttribute(e,t){this.node.setAttribute(e,t)}addListener(e,t){this.node.addEventListener(e,t)}removeListener(e,t){this.node.removeEventListener(e,t)}destroyChildren(){this.children.forEach(e=>{e.destroy()}),this.children.length=0}destroy(){this.destroyChildren(),this.node.remove()}}const u="http://127.0.0.1:3000",T="X-Total-Count";class l{static handleFetchError(e){const t=`Error message: ${e.message}`;console.log(t)}static async getCars(e,t){const a={totalNumberCars:null,carsArr:[]};try{const s=await fetch(`${u}/garage?_page=${e}&_limit=${t}`);a.totalNumberCars=s.headers.get(T),a.carsArr=await s.json()}catch(s){this.handleFetchError(s)}return a}static async getWinners(e,t){let a;try{a=(await fetch(`${u}/winners?_page=${e}&_limit=${t}`)).headers.get(T)}catch(s){this.handleFetchError(s)}return a}static async createCar(e,t){let a;try{a=await fetch(`${u}/garage`,{method:"POST",body:JSON.stringify({name:e,color:t}),headers:{"Content-Type":"application/json"}})}catch(s){this.handleFetchError(s)}return a}static async deleteCar(e){let t;try{t=await fetch(`${u}/garage/${e}`,{method:"DELETE"})}catch(a){this.handleFetchError(a)}return t}static async updateCar(e,t,a){let s;try{s=await fetch(`${u}/garage/${e}`,{method:"PUT",body:JSON.stringify({name:t,color:a}),headers:{"Content-Type":"application/json"}})}catch(r){this.handleFetchError(r)}return s}static async getCar(e){let t;try{t=await(await fetch(`${u}/garage/${e}`,{method:"GET"})).json()}catch(a){this.handleFetchError(a)}return t}static async startEngine(e,t){let a;const s=t;try{a=await(await fetch(`${u}/engine?id=${e}&status=${s}`,{method:"PATCH"})).json()}catch(r){this.handleFetchError(r)}return a}static async switchEngineToDriveMode(e){let t;const a="drive";try{t=await fetch(`${u}/engine?id=${e}&status=${a}`,{method:"PATCH"})}catch(s){this.handleFetchError(s)}return t==null?void 0:t.status}}const I=o=>`<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN"
 "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg"
 width="100px" height="40px" viewBox="0 0 1280.000000 640.000000"
 preserveAspectRatio="xMidYMid meet">
<g transform="translate(0.000000,640.000000) scale(0.100000,-0.100000)"
fill="${o}" stroke="#ffffff" stroke-width="50">
<path d="M3565 5336 c-106 -30 -101 -26 -108 -111 -4 -42 -9 -80 -12 -85 -6
-10 -246 -105 -590 -234 -448 -167 -1052 -415 -1173 -483 -78 -43 -193 -91
-250 -104 -23 -5 -98 -14 -165 -19 -67 -6 -167 -19 -222 -30 -154 -31 -340
-49 -563 -57 l-203 -6 -43 -66 c-59 -91 -60 -95 -26 -130 37 -37 38 -65 3
-150 -25 -62 -27 -78 -31 -256 l-4 -190 -38 -32 c-91 -78 -133 -209 -134 -418
0 -194 11 -396 26 -482 13 -71 14 -74 72 -122 69 -58 130 -129 158 -184 64
-126 534 -211 1384 -250 l92 -4 -6 119 c-6 142 8 256 49 383 112 352 394 622
756 722 90 26 112 28 278 28 165 0 188 -2 278 -27 201 -56 361 -152 504 -302
140 -145 222 -293 274 -492 21 -79 24 -109 23 -279 -1 -127 -6 -214 -16 -263
l-15 -73 3006 7 c1653 4 3007 8 3009 9 1 1 -8 37 -20 81 -19 67 -22 105 -22
259 -1 166 1 187 27 279 117 421 467 736 885 797 119 17 325 7 432 -21 239
-63 453 -205 601 -399 70 -92 154 -267 185 -386 24 -88 27 -119 27 -260 1
-116 -4 -181 -16 -234 -10 -41 -16 -75 -15 -76 2 -1 62 2 133 6 266 16 458 45
525 79 48 24 97 81 127 146 l24 52 -16 157 c-15 152 -15 163 4 284 63 388 50
680 -35 802 -134 193 -526 336 -1429 519 -737 149 -1322 209 -2033 210 -228 0
-226 0 -347 85 -187 131 -1045 607 -1471 815 -383 187 -788 281 -1439 332
-208 17 -1106 16 -1400 0 -121 -7 -314 -19 -430 -27 -302 -22 -286 -22 -341
10 -140 81 -187 94 -269 71z m1885 -333 c6 -37 38 -238 71 -446 32 -209 66
-422 75 -474 9 -52 15 -96 13 -97 -11 -9 -1699 29 -1951 44 -206 13 -417 36
-485 54 -98 26 -198 119 -249 231 -35 75 -36 172 -5 255 17 45 30 61 68 86 83
54 135 80 253 127 341 136 858 230 1460 267 269 16 270 16 511 18 l227 2 12
-67z m630 47 c264 -18 777 -110 1029 -186 186 -56 445 -188 756 -387 211 -134
274 -181 250 -185 -75 -12 -133 -50 -162 -106 -19 -35 -21 -136 -4 -179 l11
-27 -907 2 -906 3 -59 160 c-110 302 -298 878 -298 916 0 6 95 2 290 -11z"/>
<path d="M2633 3125 c-223 -40 -410 -141 -568 -306 -132 -138 -213 -283 -262
-467 -22 -83 -26 -119 -26 -247 -1 -169 10 -236 65 -382 87 -230 271 -436 493
-551 85 -44 178 -78 271 -98 107 -23 312 -23 419 1 392 84 699 375 802 761 23
86 26 120 27 254 1 158 -5 199 -46 330 -98 310 -355 567 -668 669 -150 50
-354 64 -507 36z m350 -301 c249 -56 457 -247 543 -499 25 -72 28 -95 28 -220
1 -153 -15 -228 -74 -345 -94 -186 -283 -337 -485 -386 -96 -24 -268 -24 -360
0 -320 84 -544 355 -562 681 -20 359 209 673 558 765 94 24 253 26 352 4z"/>
<path d="M2600 2697 c-36 -13 -85 -36 -109 -51 l-44 -28 116 -115 c81 -82 120
-114 131 -110 14 6 16 29 16 167 0 186 6 178 -110 137z"/>
<path d="M2920 2561 c0 -139 2 -162 16 -168 11 -4 50 28 130 108 l115 114 -28
22 c-34 28 -138 70 -193 79 l-40 7 0 -162z"/>
<path d="M2282 2448 c-28 -36 -92 -191 -92 -225 0 -10 34 -13 165 -13 151 0
165 1 165 18 0 15 -206 232 -221 232 -4 0 -11 -6 -17 -12z"/>
<path d="M3222 2351 c-62 -59 -112 -115 -112 -124 0 -15 17 -17 165 -17 131 0
165 3 165 13 0 40 -69 205 -95 227 -7 6 -48 -27 -123 -99z"/>
<path d="M2781 2332 c-12 -22 11 -62 34 -62 8 0 21 10 29 22 20 28 4 58 -29
58 -13 0 -29 -8 -34 -18z"/>
<path d="M2749 2161 c-32 -33 -37 -67 -14 -110 29 -57 104 -64 151 -14 53 57
9 153 -71 153 -27 0 -44 -8 -66 -29z"/>
<path d="M2570 2125 c-26 -32 13 -81 48 -59 24 16 27 45 6 61 -23 17 -39 16
-54 -2z"/>
<path d="M3006 2124 c-20 -19 -20 -38 -2 -54 23 -19 61 -8 64 18 7 44 -32 67
-62 36z"/>
<path d="M2190 1975 c0 -29 41 -140 72 -194 l31 -53 117 117 c71 71 116 123
113 131 -4 11 -40 14 -169 14 -141 0 -164 -2 -164 -15z"/>
<path d="M3110 1972 c0 -9 51 -68 114 -131 l114 -114 31 54 c30 51 71 165 71
195 0 11 -31 14 -165 14 -151 0 -165 -1 -165 -18z"/>
<path d="M2780 1901 c-7 -15 -5 -24 8 -41 32 -40 85 -4 62 41 -14 25 -56 25
-70 0z"/>
<path d="M2562 1697 c-61 -62 -112 -115 -112 -119 0 -18 208 -108 249 -108 7
0 11 54 11 164 0 140 -2 165 -16 170 -9 3 -16 6 -17 6 -1 0 -53 -51 -115 -113z"/>
<path d="M2933 1803 c-15 -6 -19 -333 -4 -333 46 0 251 88 251 108 0 9 -223
232 -230 231 -3 0 -11 -3 -17 -6z"/>
<path d="M10700 3119 c-390 -84 -696 -376 -797 -759 -31 -117 -41 -292 -24
-411 33 -227 150 -453 318 -609 267 -250 643 -344 993 -249 117 32 283 118
380 196 487 396 518 1128 67 1560 -97 93 -166 140 -290 198 -137 64 -235 86
-407 91 -120 3 -162 0 -240 -17z m445 -313 c238 -81 409 -258 486 -506 30 -96
33 -289 5 -388 -110 -400 -513 -637 -911 -536 -149 38 -313 147 -402 267 -176
238 -203 533 -71 797 34 69 60 103 138 180 77 78 111 104 181 139 129 65 207
81 364 77 109 -3 143 -7 210 -30z"/>
<path d="M10703 2700 c-54 -19 -153 -71 -153 -80 0 -3 51 -57 114 -119 80 -80
119 -112 130 -108 14 5 16 29 16 167 l0 160 -27 -1 c-16 0 -52 -9 -80 -19z"/>
<path d="M11020 2561 c0 -139 2 -162 16 -168 22 -8 247 216 234 232 -17 20
-163 84 -207 91 l-43 7 0 -162z"/>
<path d="M10366 2424 c-29 -44 -76 -165 -76 -194 0 -19 7 -20 165 -20 126 0
165 3 165 13 0 7 -51 63 -114 126 l-114 114 -26 -39z"/>
<path d="M11313 2348 c-61 -62 -109 -119 -106 -125 6 -15 333 -19 333 -4 0 45
-88 241 -108 241 -4 0 -57 -51 -119 -112z"/>
<path d="M10882 2338 c-17 -17 -15 -32 7 -52 16 -14 23 -15 41 -6 31 17 24 64
-10 68 -14 2 -31 -3 -38 -10z"/>
<path d="M10846 2159 c-68 -81 17 -194 110 -144 89 48 56 175 -46 175 -30 0
-44 -6 -64 -31z"/>
<path d="M10670 2126 c-19 -23 -8 -61 18 -64 44 -7 67 32 36 62 -19 20 -38 20
-54 2z"/>
<path d="M11106 2127 c-21 -16 -18 -45 7 -61 37 -23 77 35 41 61 -10 7 -21 13
-24 13 -3 0 -14 -6 -24 -13z"/>
<path d="M10290 1970 c0 -29 43 -141 74 -195 l28 -48 116 116 c81 81 113 120
109 131 -6 14 -29 16 -167 16 -152 0 -160 -1 -160 -20z"/>
<path d="M11207 1978 c-3 -7 47 -66 111 -130 l116 -118 27 43 c27 44 79 177
79 203 0 12 -28 14 -164 14 -122 0 -166 -3 -169 -12z"/>
<path d="M10881 1901 c-14 -25 -5 -48 20 -56 27 -9 51 13 47 44 -4 34 -51 43
-67 12z"/>
<path d="M10662 1697 c-61 -62 -112 -115 -112 -119 0 -20 201 -108 247 -108
10 0 13 34 13 164 0 140 -2 165 -16 170 -9 3 -16 6 -17 6 -1 0 -53 -51 -115
-113z"/>
<path d="M11033 1803 c-10 -3 -13 -47 -13 -169 0 -90 4 -164 8 -164 36 0 186
61 239 98 16 10 -216 242 -234 235z"/>
</g>
</svg>`;class c extends i{constructor({classNames:e=["button"],text:t,attribute:a,value:s,disabled:r=!1,onClick:d}){super({tag:"button",text:t,classNames:e,attribute:a,value:s}),r&&this.setDisabled(r),d&&this.addListener("click",d)}setDisabled(e){this.node.disabled=e}}class w extends i{constructor({name:e,type:t="text",disabled:a=!1}){super({tag:"input",classNames:["input"]}),this.setAttribute("name",e),this.setAttribute("type",t),a&&this.setDisabled(a)}getNode(){return this.node}setDisabled(e){this.node.disabled=e}}class M extends i{constructor({classNames:e,onSubmit:t},...a){super({tag:"form",classNames:e}),this.addListener("submit",t),this.appendChildren(a)}getNode(){return this.node}}const y={Tesla:["Cybertruck","Model 3","Model S","Model X","Model Y","Roadster G1","Roadster G2","Roadster IM","Semi","Model XXL"],Ford:["Mustang","Escape","Fusion","Explorer","Mondeo","Fiesta","Focus","S-MAX","Galaxy","Escort"],Mercedes:["AMG GT","170S","R129","C111","300 SLR","L206","Vaneo","W111","AMG ONE","R172"],BMW:["E30","E34","E92","F01","G15","GINA","Hydrogen 7","i3","X5","Z8"],Nissan:["Bassara","Caball","Cima","Cube","Navara","Cherry","Pathfinder","Pivo","Terrano","X-Trail"],Audi:["A4","A7","A8","Q7","Q8","SQ2","RS 3","TT RS","RS 2 Avant","TTS"],Porsche:["64","356","360 Cisitalia","597 Jagdwagen","904","911","928","Boxster","Carrera","Cayenne","Cayman"],Ferrari:["550 Maranello","599 GTB Fiorano","America","250 GTO","Berlinetta Boxer","Daytona","Dino","Enzo","612 Scaglietti","Testarossa"],Lamborghini:["Miura","Espada","Islero","Jarama","Urraco","Countach","Silhouette","Jalpa","Diablo","MurciÃ©lago","Gallardo","ReventÃ³n","Aventador","Sesto ElementÐ¾","Veneno","HuracÃ¡n","Centenario"],Bugatti:["Bolide","Divo","Type 13","Chiron","EB110","16C Galibier","Mistral","Type 35","Type 41 Royale","Veyron"]};class p{static getRandomValue(e){return Math.floor(Math.random()*e)}static getRandomColor(){const t=()=>this.getRandomValue(256),a=s=>s.toString(16).padStart(2,"0");return`#${a(t())}${a(t())}${a(t())}`}static getRandomCarName(){const e=Object.keys(y),t=this.getRandomValue(e.length),a=e[t],s=this.getRandomValue(y[a].length),r=y[a][s];return`${a} ${r}`}static createSvg(e,t,a){const r=document.createElementNS("http://www.w3.org/2000/svg","svg");return r.setAttributeNS(null,"width",t),r.setAttributeNS(null,"height",a),r.setAttributeNS(null,"class","car-svg"),r.innerHTML=e,r}static ButtonsStateToggle(e,t){e.toggleClass("button_disabled"),t.toggleClass("button_disabled"),e.getNode().disabled?e.setDisabled(!1):e.setDisabled(!0),t.getNode().disabled?t.setDisabled(!1):t.setDisabled(!0)}}class R extends i{constructor(){super({classNames:["garage"]});n(this,"container");n(this,"title");n(this,"pageNumberNode");n(this,"pageNumber");n(this,"limit");n(this,"garageControl");n(this,"carNameInput");n(this,"carColorInput");n(this,"createButton");n(this,"updateButton");n(this,"carNameUpdateInput");n(this,"carColorUpdateInput");n(this,"carBox");n(this,"currentCarId");n(this,"totalNumberCars");n(this,"isPagination");n(this,"paginationNode");n(this,"prevButton");n(this,"nextButton");n(this,"raceButton");n(this,"resetButton");n(this,"generateCarsButton");n(this,"animationFrameIds",{});this.title=new i({classNames:["title"]}),this.pageNumberNode=new i,this.container=new i({classNames:["container"]}),this.pageNumber=1,this.limit=7,this.currentCarId=null,this.totalNumberCars=0,this.isPagination=!1,this.garageControl=new i,this.createButton=new c({text:"CREATE ",attribute:"type",value:"submit"}),this.updateButton=new c({classNames:["button","button_disabled"],text:"UPDATE",attribute:"type",value:"submit",disabled:!0}),this.carNameInput=new w({name:"car-name"}),this.carColorInput=new w({name:"car-color",type:"color"}),this.carNameUpdateInput=new w({name:"car-name-update",disabled:!0}),this.carColorUpdateInput=new w({name:"car-color-update",type:"color",disabled:!0}),this.carBox=new i,this.paginationNode=new i({classNames:["pagination-buttons"]}),this.prevButton=new c({text:"PREV",onClick:()=>this.changePage("prev")}),this.nextButton=new c({text:"NEXT",onClick:()=>this.changePage("next")}),this.raceButton=new c({classNames:["button","race-button"],text:"RACE",onClick:()=>{p.ButtonsStateToggle(this.raceButton,this.resetButton),this.startAllCars()}}),this.resetButton=new c({classNames:["button","race-button","button_disabled"],text:"RESET",disabled:!0,onClick:()=>{p.ButtonsStateToggle(this.raceButton,this.resetButton),this.stopAllCars()}}),this.generateCarsButton=new c({classNames:["button","generate-button"],text:"GENERATE CARS",onClick:()=>this.generateHundredCars()}),this.renderGaragePage()}renderGaragePage(){this.append(this.container),this.renderGarageControl(),this.renderTitle(),this.renderCarBox(),this.setTotalNumberCarsAndRenderCars(),this.setPageNumber(),this.container.append(this.paginationNode)}renderTitle(){this.container.appendChildren([this.title,this.pageNumberNode])}async setTotalNumberCarsAndRenderCars(){const{totalNumberCars:t,carsArr:a}=await l.getCars(this.pageNumber,this.limit),s=`Garage (${t})`;this.title.setTextContent(s),a.forEach(r=>this.renderCarNode(r)),this.totalNumberCars=Number(t),this.pagination(),this.carBox.getNode().childNodes.length===0&&this.pageNumber!==1&&(this.pageNumber-=1,this.setPageNumber(),this.setTotalNumberCarsAndRenderCars())}setPageNumber(){const t=`Page #${this.pageNumber}`;this.pageNumberNode.setTextContent(t)}renderCarNode(t){const{name:a,color:s,id:r}=t,d=new i({classNames:["car-name"],text:t.name}),h=t.id;d.getNode().style.color=s;const C=p.createSvg(I(s),"90","40");let g;const m=new c({text:"START",onClick:()=>{p.ButtonsStateToggle(m,g),this.driveAnimation(C,h)}});g=new c({text:"STOP",disabled:!0,classNames:["button","button_disabled"],onClick:()=>{p.ButtonsStateToggle(m,g),this.stopCar(C,h)}}),a&&d.addClass(["car-name-background"]);const N=new i({classNames:["car-row"]},m,g),b=new i({classNames:["car__node"]},new i({classNames:["car-node__top"]},new c({text:"SELECT",onClick:()=>this.selectCar(r)}),new c({text:"REMOVE",onClick:()=>this.removeCar(r)}),d),N);N.getNode().append(C),N.append(new i({classNames:["flag"],text:"ðŸš©"})),this.carBox.append(b)}renderGarageControl(){this.garageControl.appendChildren([new M({classNames:["garage-control__row"],onSubmit:this.createCar.bind(this)},this.carNameInput,this.carColorInput,this.createButton),new M({classNames:["garage-control__row"],onSubmit:this.updateCar.bind(this)},this.carNameUpdateInput,this.carColorUpdateInput,this.updateButton),new i({classNames:["garage-control__row"]},this.raceButton,this.resetButton,this.generateCarsButton)]),this.container.append(this.garageControl)}renderCarBox(){this.container.append(this.carBox)}async createCar(t){t&&t.preventDefault();const a=this.carNameInput.getNode().value,s=this.carColorInput.getNode().value;await l.createCar(a,s),this.carNameInput.getNode().value="",this.carBox.destroyChildren(),this.setTotalNumberCarsAndRenderCars()}async updateCar(t){t.preventDefault();const a=this.carNameUpdateInput.getNode().value,s=this.carColorUpdateInput.getNode().value;await l.updateCar(this.currentCarId,a,s),this.carNameUpdateInput.getNode().value="",this.carBox.destroyChildren(),this.setTotalNumberCarsAndRenderCars(),this.updateFormDisable()}async removeCar(t){await l.deleteCar(t),this.carBox.destroyChildren(),this.setTotalNumberCarsAndRenderCars()}selectCar(t){this.currentCarId=t,this.updateButton.removeClass("button_disabled"),this.updateButton.setDisabled(!1),this.carNameUpdateInput.setDisabled(!1),this.carColorUpdateInput.setDisabled(!1),this.carNameUpdateInput.getNode().focus(),this.inputCarDataToForm()}async inputCarDataToForm(){if(this.currentCarId){const t=await l.getCar(this.currentCarId);this.carNameUpdateInput.getNode().value=t.name,this.carColorUpdateInput.getNode().value=t.color}}updateFormDisable(){const t="#000000";this.updateButton.addClass(["button_disabled"]),this.updateButton.setDisabled(!0),this.carNameUpdateInput.setDisabled(!0),this.carColorUpdateInput.setDisabled(!0),this.carColorUpdateInput.getNode().value=t}pagination(){this.totalNumberCars>this.limit&&!this.isPagination&&(this.isPagination=!0,this.paginationNode.appendChildren([this.prevButton,this.nextButton])),this.totalNumberCars<=this.limit&&this.isPagination&&(this.paginationNode.destroyChildren(),this.isPagination=!1),this.setDisablePaginationButton()}changePage(t){t==="next"&&(this.pageNumber+=1),t==="prev"&&(this.pageNumber-=1),this.setPageNumber(),this.carBox.destroyChildren(),this.setTotalNumberCarsAndRenderCars()}setDisablePaginationButton(){const t=Math.ceil(this.totalNumberCars/this.limit);this.pageNumber===1?(this.prevButton.setDisabled(!0),this.prevButton.addClass(["button_disabled"])):(this.prevButton.setDisabled(!1),this.prevButton.removeClass("button_disabled")),this.pageNumber===t?(this.nextButton.setDisabled(!0),this.nextButton.addClass(["button_disabled"])):(this.nextButton.setDisabled(!1),this.nextButton.removeClass("button_disabled"))}generateHundredCars(){for(let a=0;a<100;a+=1)l.createCar(p.getRandomCarName(),p.getRandomColor());this.carBox.destroyChildren(),this.setTotalNumberCarsAndRenderCars()}async driveAnimation(t,a){let s;async function r(f){await l.switchEngineToDriveMode(f)===500&&cancelAnimationFrame(s)}const h=await l.startEngine(a,"started");r(a);const{velocity:v,distance:B}=h,C=255,g=t,m=window.innerWidth-C,N=125;let b=0;const E=B/v/1e3*60,A=(m-t.getBoundingClientRect().x+N)/E,x=()=>{b+=A;const f=`translateX(${b}px)`;g.style.transform=f,b<m&&(s=requestAnimationFrame(x),this.animationFrameIds[a]=s)};x()}async stopCar(t,a){const s="stopped",r=t,d="translateX(0)";await l.startEngine(a,s);const h=this.animationFrameIds[a];cancelAnimationFrame(h),r.style.transform=d}async startAllCars(){const t=this.carBox.getNode().querySelectorAll(".car-svg");await Promise.all(Array.from(t).map((a,s)=>this.driveAnimation(a,s+1)))}async stopAllCars(){this.carBox.getNode().querySelectorAll(".car-svg").forEach((a,s)=>this.stopCar(a,s+1))}}class $ extends i{constructor(t,a){super({tag:"header",classNames:["header"]});n(this,"container");n(this,"buttonGarage");n(this,"buttonWinners");this.winners=t,this.garage=a,this.buttonGarage=new c({text:"TO GARAGE",onClick:()=>this.showGarage()}),this.buttonWinners=new c({text:"TO WINNER",onClick:()=>this.showWinnersPage()}),this.container=new i({classNames:["container"]},new i({classNames:["header__buttons"]},this.buttonGarage,this.buttonWinners)),this.append(this.container)}showWinnersPage(){this.garage.addClass(["page_hidden"]),this.winners.removeClass("page_hidden")}showGarage(){this.winners.addClass(["page_hidden"]),this.garage.removeClass("page_hidden")}}class D extends i{constructor(){super({classNames:["winners","page_hidden"]});n(this,"container");n(this,"title");n(this,"pageNumberNode");n(this,"pageNumber");n(this,"limit");this.title=new i,this.pageNumberNode=new i,this.container=new i({classNames:["container"]},this.title,this.pageNumberNode),this.pageNumber=1,this.limit=7,this.renderWinnersPage(),this.setTotalNumberWinners(),this.setPageNumber()}renderWinnersPage(){this.append(this.container)}async setTotalNumberWinners(){const a=`Winners (${await l.getWinners(this.pageNumber,this.limit)})`;this.title.setTextContent(a)}setPageNumber(){this.pageNumberNode.setTextContent("Page #1")}}class z{constructor(){n(this,"body");n(this,"header");n(this,"garage");n(this,"winners");this.body=document.body,this.winners=new D,this.garage=new R,this.header=new $(this.winners,this.garage)}start(){this.body.append(this.header.getNode()),this.body.append(this.garage.getNode()),this.body.append(this.winners.getNode())}}const F=new z;F.start();
